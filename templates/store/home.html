{% extends 'base.html' %}
{% load static %}

{% block title %}Mi Pequeña Gran Estrella{% endblock %}

{% block content %}
<section class="filters-bar">
    <form method="get">
        <div class="filters-group">
            <label for="categoria">Categoría</label>
            <select name="categoria" id="categoria">
                <option value="">Todas</option>
                {% for category in categories %}
                    <option value="{{ category.slug }}" {% if categoria_actual == category.slug %}selected{% endif %}>
                        {{ category.name }}
                    </option>
                {% endfor %}
            </select>
        </div>
        <div class="filters-group">
            <label for="orden">Ordenar por</label>
            <select name="orden" id="orden">
                <option value="">Por defecto</option>
                <option value="precio_asc" {% if orden_actual == 'precio_asc' %}selected{% endif %}>Precio: menor a mayor</option>
                <option value="precio_desc" {% if orden_actual == 'precio_desc' %}selected{% endif %}>Precio: mayor a menor</option>
            </select>
        </div>
        <button type="submit" class="btn">Aplicar</button>
    </form>
</section>

<div class="container">
    {% for product in products %}
    <article class="product-card">
        <div class="product-image">
            {% if product.image %}
                <img src="{{ product.image.url }}" alt="{{ product.name }}">
            {% else %}
                <span>Sin Imagen</span>
            {% endif %}
        </div>

        <div class="product-info">
            <h3>{{ product.name }}</h3>
            <span class="price">${{ product.price }}</span>
            <br>
            <a href="{% url 'store:product_detail' product.slug %}" class="btn">Ver Detalles</a>
        </div>
    </article>
    {% empty %}
        <p>Aún no hay productos cargados en el sistema.</p>
    {% endfor %}
</div>
{% endblock %}